## 结构型设计模式



结构化设计的两个基本原则 **高内聚，低耦合**

在面向对象的设计中，目标就是设计出高内聚、低耦合的程序。

**聚合（Cohesion）是一个模块内部各成分之间相关联程度的度量。**

每个模块尽可能独立完成自己的功能，不依赖于模块外部的代码。

**耦合（Couping）是模块之间相关联程度的度量，相对于聚合的内向性，耦合关注的是某一模块和其他模块之间的关联性。**

耦合可以分为以下几种，它们之间的耦合度由高到低排列如下：

- 内容耦合：当一个模块直接修改或操作另一个模块的数据时，或一个模块不通过正常入口而转入另一个模块时，这样的耦合被称为内容耦合。内容耦合是最高程度的耦合，应该避免使用之。

- 公共耦合：两个或两个以上的模块共同引用一个全局数据项，这种耦合被称为公共耦合。若有一个公共数据做了修改,很难判定究竟有多少模块使用了该公共数据，在修改与维护时就有可能出现模块被遗漏的情况。

- 外部耦合：一组模块都访问同一全局简单变量而不是同一全局数据结构，而且不是通过参数表传递该全局变量的信息，则称之为外部耦合。

- 控制耦合：一个模块通过接口向另一个模块传递一个控制信号，接受信号的模块根据信号值而进行适当的动作，这种耦合被称为控制耦合。

- 标记耦合：若一个模块A通过接口向两个模块B和C传递一个公共参数，那么称模块B和C之间存在一个标记耦合。

- 数据耦合：模块之间通过参数来传递数据，那么被称为数据耦合。数据耦合是最低的一种耦合形式，系统中一般都存在这种类型的耦合，因为为了完成一些有意义的功能，往往需要将某些模块的输出数据作为另一些模块的输入数据。

-  非直接耦合：两个模块之间没有直接关系，它们之间的联系完全是通过主模块的控制和调用来实现的。

**耦合是影响软件复杂程度和设计质量的一个重要因素，在设计上我们应采用以下原则：如果模块间必须存在耦合，就尽量使用数据耦合，少用控制耦合，限制公共耦合的范围，尽量避免使用内容耦合。**

内聚标志一个模块内各个元素彼此结合的紧密程度，它是信息隐蔽和局部化概念的自然扩展。内聚是从功能角度来度量模块内的联系，一个好的内聚模块应当恰好做一件事。它描述的是模块内的功能联系。 耦合是软件结构中各模块之间相互连接的一种度量，耦合强弱取决于模块间接口的复杂程度、进入或访问一个模块的点以及通过接口的数据。 程序讲究的是低耦合，高内聚。就是同一个模块内的各个元素之间要高度紧密，但是各个模块之间的相互依存度却要不那么紧密。 内聚和耦合是密切相关的，同其他模块存在高耦合的模块意味着低内聚，而高内聚的模块意味着该模块同其他模块之间是低耦合。在进行软件设计时，应力争做到高内聚，低耦合。

#### 桥梁模式（Bridge）

**目的：将抽象与实现分离，这样两者可以独立地改变，且互不影响。**

- 举例：
  - 数据查询（ElasticSreach，Mysql，MongoDB）

#### 组合模式（Composite）

**目的：一组对象与该对象的单个实例的处理方式一致。**

有时候又叫做部分-整体模式，用于将对象组合成树形结构以表示“部分-整体”的层次关系。组合模式使得用户对单个对象和组合对象的使用具有一致性。

常见使用场景：如树形菜单、文件夹菜单、部门组织架构图等。

#### 注册模式（Registry）

正常情况下，我们现在获取对象内的方法主要有2种：

- new 实例化
- 访问静态方法

那么有没有一种可能，我们可以直接获取一个已经创建好的对象呢？

而注册模式就是能够存储在应用程序中经常使用的对象实例，通常会使用只有静态方法的抽象类来实现（或使用单例模式）。




